<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="confirmation" content="Neither Mermaid JS nor SVG were used in this document.">
    <title>FAM Alliance WvW Raid Schedule</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">    
    
    <script src="./src/luxon.344.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark mode background */
            color: #e2e8f0; /* Light text for dark background */
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        body.light-mode {
            background-color: #f0f4f8; /* Light mode background */
            color: #6b7280; /* Dark text for light background */
        }
        .kpi-card {
            background-color: #F29F05; /* Original KPI card color */
            color: white;
        }
        .kpi-number {
            font-weight: 900;
            font-size: 4rem;
            line-height: 1;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1px;
            top: 22px;
            bottom: -22px;
            width: 2px;
            background-color: #4a5568; /* Darker line for timeline */
            transition: background-color 0.3s ease;
        }
        body.light-mode .timeline-item::before {
            background-color: #e5e7eb; /* Light mode line for timeline */
        }
        .timeline-item:last-child::before {
            display: none;
        }
        .timeline-icon {
            position: absolute;
            left: -11px;
            top: 10px;
            width: 22px;
            height: 22px;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid #1a202c; /* Border matches new dark body background */
            transition: border-color 0.3s ease;
        }
        body.light-mode .timeline-icon {
            border: 4px solid #f0f4f8; /* Border matches new light body background */
        }
        /* Toggle Switch Styling */
        .toggle-switch {
            position: absolute;
            top: 5px; /* Adjusted: Increased distance from top */
            left: 20px;
            z-index: 10;
        }
        .toggle-switch input[type="checkbox"] {
            height: 0;
            width: 0;
            visibility: hidden;
        }
        .toggle-switch label {
            cursor: pointer;
            text-indent: -9999px;
            width: 60px;
            height: 30px;
            background: #4a5568; /* Darker grey for dark mode toggle background */
            display: block;
            border-radius: 100px;
            position: relative;
        }
        body.light-mode .toggle-switch label {
            background: #cbd5e0; /* Lighter grey for light mode toggle background */
        }
        .toggle-switch label:after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: #fff;
            border-radius: 90px;
            transition: 0.3s;
        }
        .toggle-switch input:checked + label {
            background: #00A6A6; /* Accent color when light mode is active */
        }
        .toggle-switch input:checked + label:after {
            left: calc(100% - 3px);
            transform: translateX(-100%);
        }
        .toggle-switch label:active:after {
            width: 32px;
        }
        .toggle-switch .toggle-icon {
            position: absolute;
            top: 40%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            line-height: 1;
            color: #fff;
            pointer-events: none; /* Make icons not interfere with click */
            transition: color 0.3s ease;
        }
        .toggle-switch .sun-icon {
            right: 8px;
            color: #cbd5e0; /* Greyed out in dark mode */
        }
        .toggle-switch .moon-icon {
            left: 8px;
            color: #fff; /* White in dark mode */
        }
        body.light-mode .toggle-switch .sun-icon {
            color: #fff; /* White in light mode */
        }
        body.light-mode .toggle-switch .moon-icon {
            color: #4a5568; /* Greyed out in light mode */
        }
    </style>
</head>
<body>

    <div class="toggle-switch">
        <input type="checkbox" id="darkModeToggle">
        <label for="darkModeToggle"></label>
        <span class="toggle-icon moon-icon">&#9790;</span> <span class="toggle-icon sun-icon">&#9728;</span> </div>

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl pt-64"> <header class="text-center mb-16"> <h1 class="text-4xl md:text-5xl font-extrabold text-[#00A6A6] tracking-tight"><br>FAM Alliance WvW Raid Schedule</h1>
            <p class="mt-3 text-lg text-gray-400 max:text-gray-400 light:text-gray-600">Find a raid with Friendship and MURDER!</p>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            
            <section class="md:col-span-2 lg:col-span-3 p-6 rounded-2xl shadow-lg bg-gray-800 light:bg-white">
                <h2 class="text-2xl font-bold mb-1 text-center text-gray-200 light:text-gray-800">The Full Weekly Schedule</h2>
                <p class="text-center text-gray-400 mb-8 light:text-gray-600">SOCK ğŸ§¦ â€¢ DAWN ğŸŒ â€¢  FOE ğŸ¢ <br> ğŸ† Chill PPT/Fighting â€¢ âš”ï¸ Fighting</p>           
                <div class="grid grid-cols-1 xl:grid-cols-7 gap-x-6 gap-y-8" id="schedule-container">
                    <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Sunday</h3>
                        <div class="relative pl-8 timeline-item" data-day="Sunday" data-time="7:30 AM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸ§¦</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="7:30 AM Eastern">(Time)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Bloop</p></div>
                        <div class="relative pl-8 timeline-item" data-day="Sunday" data-time="8:00 AM" data-zone="America/New_York"><div class="timeline-icon bg-[#F29F05]">ğŸ¢</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† FOE raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="8:00 AM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Able</p></div>                       
                        <div class="relative pl-8 timeline-item" data-day="Sunday" data-time="7:00 PM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸŒ</div><p class="font-semibold text-gray-200 light:text-gray-800">âš”ï¸ DAWN raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="7:00 PM Eastern">(Time)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Morthuus</p></div>                       
                        <div class="relative pl-8 timeline-item" data-day="Sunday" data-time="8:00 PM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸ§¦</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="8:00 PM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Mocha Joe</p></div>                        
                    </div>
                    <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Monday</h3>
                        <div class="relative pl-8 timeline-item" data-day="Monday" data-time="7:00 AM" data-zone="America/New_York"><div class="timeline-icon bg-[#F29F05]">ğŸ¢</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† FOE raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="7:00 AM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead:Usual_Suspects</p></div>                         
                        <div class="relative pl-8 timeline-item" data-day="Monday" data-time="7:00 PM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸŒ</div><p class="font-semibold text-gray-200 light:text-gray-800">âš”ï¸ DAWN raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="7:00 PM Eastern">(Time)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Morthuus</p></div> 
                    </div>
                     <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Tuesday</h3>                       
                        <div class="relative pl-8 timeline-item" data-day="Tuesday" data-time="7:30 AM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸ§¦</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="7:30 AM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Bloop</p></div>
                        <div class="relative pl-8 timeline-item" data-day="Tuesday" data-time="8:00 AM" data-zone="America/New_York"><div class="timeline-icon bg-[#F29F05]">ğŸ¢</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† FOE raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="8:00 AM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead:Usual_Suspects</p></div>                         
                        <div class="relative pl-8 timeline-item" data-day="Tuesday" data-time="6:30 PM" data-zone="America/New_York"><div class="timeline-icon bg-[#F29F05]">ğŸ¢</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† FOE raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="6:30 PM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Able</p></div>                        
                        <div class="relative pl-8 timeline-item" data-day="Tuesday" data-time="7:00 PM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸŒ</div><p class="font-semibold text-gray-200 light:text-gray-800">âš”ï¸ DAWN raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="7:00 PM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Morthuus</p></div>
                        <div class="relative pl-8 timeline-item" data-day="Tuesday" data-time="8:00 PM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸ§¦</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="8:00 PM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Vin</p></div>
                    </div>
                    <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Wednesday</h3> 
                        <div class="relative pl-8 timeline-item" data-day="Wednesday" data-time="8:00 AM" data-zone="America/New_York"><div class="timeline-icon bg-[#F29F05]">ğŸ¢</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† FOE raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="8:00 AM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead:Usual_Suspects</p></div>                         
                        <div class="relative pl-8 timeline-item" data-day="Wednesday" data-time="7:00 PM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸŒ</div><p class="font-semibold text-gray-200 light:text-gray-800">âš”ï¸ DAWN raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="7:00 PM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Morthuus</p></div> 
                    </div>
                    <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Thursday</h3>
                        <div class="relative pl-8 timeline-item" data-day="Thursday" data-time="8:00 AM" data-zone="America/New_York"><div class="timeline-icon bg-[#F29F05]">ğŸ¢</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† FOE raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="8:00 AM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead:Usual_Suspects</p></div>                         
                        <div class="relative pl-8 timeline-item" data-day="Thursday" data-time="7:00 PM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸŒ</div><p class="font-semibold text-gray-200 light:text-gray-800">âš”ï¸ DAWN raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="7:00 PM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead:Blissfully_Demented</p></div>
                        <div class="relative pl-8 timeline-item" data-day="Thursday" data-time="8:00 PM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸ§¦</div><p class="font-semibold text-gray-200 light:text-gray-800">âš”ï¸ SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="8:00 PM Eastern">(Time)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Batercus</p></div>
                    </div>
                    <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Friday</h3> 
                        <div class="relative pl-8 timeline-item" data-day="Friday" data-time="8:00 AM" data-zone="America/New_York"><div class="timeline-icon bg-[#F29F05]">ğŸ¢</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† FOE raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="8:00 AM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead:Usual_Suspects</p></div>                         
                        <div class="relative pl-8 timeline-item" data-day="Friday" data-time="9:00 PM" data-zone="America/New_York"><div class="timeline-icon bg-[#F29F05]">ğŸ¹</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† FAM raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="9:00 PM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead: (Rotation)</p></div>                        
                    </div>
                     <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Saturday</h3>
                        <div class="relative pl-8 timeline-item" data-day="Saturday" data-time="7:30 AM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸ§¦</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="7:30 AM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Nyoom</p></div>
                        <div class="relative pl-8 timeline-item" data-day="Saturday" data-time="8:00 AM" data-zone="America/New_York"><div class="timeline-icon bg-[#F29F05]">ğŸ¢</div><p class="font-semibold text-gray-200 light:text-gray-800">ğŸ† FOE raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="8:00 AM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Able</p></div>                        
                        <div class="relative pl-8 timeline-item" data-day="Saturday" data-time="7:00 PM" data-zone="America/New_York"><div class="timeline-icon bg-[#00A6A6]">ğŸŒ</div><p class="font-semibold text-gray-200 light:text-gray-800">âš”ï¸ DAWN raid</p><p class="text-sm text-gray-400 light:text-gray-600" data-original-time="7:00 PM Eastern">(Time) </p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Morthuus</p></div> 
                    </div>
                </div>
            </section>
            <div class="md:col-span-1 lg:col-span-1 p-6 rounded-2xl shadow-lg flex flex-col justify-center items-center text-center kpi-card">
                <h3 class="text-xl font-bold uppercase tracking-wider text-white/80">Total Raids</h3>
                <p class="kpi-number">21</p>
                <p class="font-medium">events scheduled this week</p>
            </div>
            <div class="md:col-span-1 lg:col-span-1 p-6 rounded-2xl shadow-lg flex flex-col justify-center items-center text-center bg-gray-800 light:bg-white">
                <h3 class="text-xl font-bold uppercase tracking-wider text-gray-400 light:text-gray-500">Active Raid Leaders</h3>
                <p class="kpi-number text-[#F27405]">9</p>
                <p class="font-medium text-gray-300 light:text-gray-600">members leading the charge</p>
            </div>
            <div class="md:col-span-2 lg:col-span-1 p-6 rounded-2xl shadow-lg flex flex-col justify-center items-center text-center bg-gray-800 light:bg-white">
                <h3 class="text-xl font-bold uppercase tracking-wider text-gray-400 light:text-gray-500">Days without incident</h3>
                <p class="kpi-number text-[#75B54A]">0</p>
                <p class="font-medium text-gray-300 light:text-gray-600">Days since last inappropriate voice chat</p>
            </div>

        </main>
    </div>

    <script>
        // Existing Dark Mode Toggle Script
        document.addEventListener('DOMContentLoaded', () => {
            const toggle = document.getElementById('darkModeToggle');
            const body = document.body;

            // Apply 'light' and 'dark' classes for dynamic Tailwind styling
            const applyModeClasses = (isLightMode) => {
                // ... (your existing class toggling logic remains here)
                const elementsWithLightBg = document.querySelectorAll('.light\\:bg-white');
                const elementsWithLightTextGray500 = document.querySelectorAll('.light\\:text-gray-500');
                const elementsWithLightTextGray600 = document.querySelectorAll('.light\\:text-gray-600');
                const elementsWithLightTextGray800 = document.querySelectorAll('.light\\:text-gray-800');


                if (isLightMode) {
                    body.classList.add('light-mode');
                    elementsWithLightBg.forEach(el => el.classList.add('bg-white'));
                    elementsWithLightTextGray500.forEach(el => el.classList.add('text-gray-500'));
                    elementsWithLightTextGray600.forEach(el => el.classList.add('text-gray-600'));
                    elementsWithLightTextGray800.forEach(el => el.classList.add('text-gray-800'));


                } else {
                    body.classList.remove('light-mode');
                    elementsWithLightBg.forEach(el => el.classList.remove('bg-white'));
                    elementsWithLightTextGray500.forEach(el => el.classList.remove('text-gray-500'));
                    elementsWithLightTextGray600.forEach(el => el.classList.remove('text-gray-600'));
                    elementsWithLightTextGray800.forEach(el => el.classList.remove('text-gray-800'));
                }
            };

            // Check for saved preference in localStorage
            const savedMode = localStorage.getItem('darkMode');

            if (savedMode === 'light') {
                toggle.checked = true; // Check the toggle if light mode was saved
                applyModeClasses(true); // Apply light mode classes
            } else {
                toggle.checked = false; // Ensure toggle is unchecked for dark mode
                applyModeClasses(false); // Apply dark mode classes (default)
            }

            toggle.addEventListener('change', () => {
                if (toggle.checked) {
                    applyModeClasses(true);
                    localStorage.setItem('darkMode', 'light');
                } else {
                    applyModeClasses(false);
                    localStorage.setItem('darkMode', 'dark');
                }
            });

            // 2. LUXON TIME CONVERSION LOGIC

            const DateTime = luxon.DateTime;
            const ORIGINAL_ZONE = 'America/New_York';

            function convertToLocalTime(day, timEastr) {
                let now = DateTime.local().setZone(ORIGINAL_ZONE);
                let currentDayIndex = now.weekday; // 1 (Mon) - 7 (Sun)
                let targetDayIndex;
                
                const dayMap = {
                    'Monday': 1, 'Tuesday': 2, 'Wednesday': 3, 'Thursday': 4, 
                    'Friday': 5, 'Saturday': 6, 'Sunday': 7
                };

                targetDayIndex = dayMap[day];
                
                if (targetDayIndex === undefined) return null;

                let targetDate = now.reconfigure({ weekday: targetDayIndex });

                if (targetDate < now.startOf('day') && targetDayIndex !== currentDayIndex) {
                    targetDate = targetDate.plus({ days: 7 });
                }

                const parsedTime = DateTime.fromFormat(timEastr, "h:mm a");

                if (!parsedTime.isValid) return null;

                const originalDateTime = targetDate.set({
                    hour: parsedTime.hour,
                    minute: parsedTime.minute,
                    second: 0,
                    millisecond: 0
                });

                const localDateTime = originalDateTime.toLocal();

                // Use 'Z' for the short UTC offset (e.g., -5, +8)
                // The format will be "h:mm a Z" -> "4:30 AM -5"
                return localDateTime.toFormat('h:mm a Z'); 
            }

            // 3. Iteration Logic (Remains the same as it calls the fixed function)
            const timelineItems = document.querySelectorAll('.timeline-item');

            timelineItems.forEach(item => {
                const day = item.getAttribute('data-day');
                const time = item.getAttribute('data-time');
                const timeElement = item.querySelector('.text-sm');

                if (timeElement && day && time) {
                    const localTimEastr = convertToLocalTime(day, time);
                    
                    if (localTimEastr) {
                        const originalTimeText = timeElement.getAttribute('data-original-time') || 'Original Time';
                        
                        // Update the text: "Original Time [Time Zone] (Local Time [Offset])"
                        // Example: "7:30 AM Eastern (4:30 AM -5)"
                        timeElement.textContent = `${originalTimeText} (${localTimEastr})`;
                    }
                }
            });
        });
    </script>
</body>
</html>
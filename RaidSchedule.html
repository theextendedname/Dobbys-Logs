<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="confirmation" content="Neither Mermaid JS nor SVG were used in this document.">
    <title>FAM Alliance WvW Raid Schedule</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <script>
    document.addEventListener('DOMContentLoaded', () => {
    // Function to fetch and process the timestamp
    async function loadAndDisplayMinutes() {
        try {
            // Fetch the timestamp from the file in the same directory
            const response = await fetch('incidentTS');
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const incidentTS = (await response.text()).trim();
            
            // Get the HTML elements to update
            const minutesElement = document.querySelector('.kpi-number.text-\\[\\#75B54A\\]');
            const labelElement = document.querySelector('.font-medium.text-gray-300.light\\:text-gray-600');
            const headingElement = document.querySelector('h3.text-xl.font-bold.uppercase.tracking-wider.text-gray-400');

            // Parse the timestamp string
            const [datePart, timePart] = incidentTS.split('_');
            const [year, month, day] = datePart.split('-').map(Number);
            const [hour, minute, second] = timePart.split('-').map(Number);

            // Note: Month in JavaScript's Date object is 0-indexed (0 for January, 11 for December)
            const incidentDate = new Date(year, month - 1, day, hour, minute, second);

            function updateTimeDisplay() {
                const now = new Date();
                const minutesElapsed = Math.floor((now - incidentDate) / 1000 / 60);
                
                // Update the display with minutes
                minutesElement.textContent = minutesElapsed;
                
                // Update the heading and label
                //headingElement.textContent = 'Minutes without incident';
                //if (minutesElapsed === 1) {
                    labelElement.textContent = 'minute since last inappropriate voice chat';
                //} else {
                //    labelElement.textContent = 'minutes since last inappropriate voice chat';
                //}
            }

            // Call the function to update the display immediately and then every minute
            updateTimeDisplay();
            setInterval(updateTimeDisplay, 60000); // 60000 milliseconds = 1 minute

        } catch (error) {
            console.error('Could not fetch the incident timestamp file:', error);
            // Fallback to display an error message if the file can't be loaded
            const minutesElement = document.querySelector('.kpi-number.text-\\[\\#75B54A\\]');
            minutesElement.textContent = 'N/A';
            const labelElement = document.querySelector('.font-medium.text-gray-300.light\\:text-gray-600');
            labelElement.textContent = 'Error loading timestamp';
        }
    }
    
    loadAndDisplayMinutes();
});
</script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark mode background */
            color: #e2e8f0; /* Light text for dark background */
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        body.light-mode {
            background-color: #f0f4f8; /* Light mode background */
            color: #6b7280; /* Dark text for light background */
        }
        .kpi-card {
            background-color: #F29F05; /* Original KPI card color */
            color: white;
        }
        .kpi-number {
            font-weight: 900;
            font-size: 4rem;
            line-height: 1;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1px;
            top: 22px;
            bottom: -22px;
            width: 2px;
            background-color: #4a5568; /* Darker line for timeline */
            transition: background-color 0.3s ease;
        }
        body.light-mode .timeline-item::before {
            background-color: #e5e7eb; /* Light mode line for timeline */
        }
        .timeline-item:last-child::before {
            display: none;
        }
        .timeline-icon {
            position: absolute;
            left: -11px;
            top: 10px;
            width: 22px;
            height: 22px;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid #1a202c; /* Border matches new dark body background */
            transition: border-color 0.3s ease;
        }
        body.light-mode .timeline-icon {
            border: 4px solid #f0f4f8; /* Border matches new light body background */
        }
        /* Toggle Switch Styling */
        .toggle-switch {
            position: absolute;
            top: 5px; /* Adjusted: Increased distance from top */
            left: 20px;
            z-index: 10;
        }
        .toggle-switch input[type="checkbox"] {
            height: 0;
            width: 0;
            visibility: hidden;
        }
        .toggle-switch label {
            cursor: pointer;
            text-indent: -9999px;
            width: 60px;
            height: 30px;
            background: #4a5568; /* Darker grey for dark mode toggle background */
            display: block;
            border-radius: 100px;
            position: relative;
        }
        body.light-mode .toggle-switch label {
            background: #cbd5e0; /* Lighter grey for light mode toggle background */
        }
        .toggle-switch label:after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: #fff;
            border-radius: 90px;
            transition: 0.3s;
        }
        .toggle-switch input:checked + label {
            background: #00A6A6; /* Accent color when light mode is active */
        }
        .toggle-switch input:checked + label:after {
            left: calc(100% - 3px);
            transform: translateX(-100%);
        }
        .toggle-switch label:active:after {
            width: 32px;
        }
        .toggle-switch .toggle-icon {
            position: absolute;
            top: 40%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            line-height: 1;
            color: #fff;
            pointer-events: none; /* Make icons not interfere with click */
            transition: color 0.3s ease;
        }
        .toggle-switch .sun-icon {
            right: 8px;
            color: #cbd5e0; /* Greyed out in dark mode */
        }
        .toggle-switch .moon-icon {
            left: 8px;
            color: #fff; /* White in dark mode */
        }
        body.light-mode .toggle-switch .sun-icon {
            color: #fff; /* White in light mode */
        }
        body.light-mode .toggle-switch .moon-icon {
            color: #4a5568; /* Greyed out in light mode */
        }
    </style>
</head>
<body>

    <div class="toggle-switch">
        <input type="checkbox" id="darkModeToggle">
        <label for="darkModeToggle"></label>
        <span class="toggle-icon moon-icon">&#9790;</span> <!-- Moon icon -->
        <span class="toggle-icon sun-icon">&#9728;</span> <!-- Sun icon -->
    </div>

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl pt-64"> <!-- Increased top padding -->

        <header class="text-center mb-16"> <!-- Increased bottom margin -->
            <h1 class="text-4xl md:text-5xl font-extrabold text-[#00A6A6] tracking-tight"><br>FAM Alliance WvW Raid Schedule</h1>
            <p class="mt-3 text-lg text-gray-400 max:text-gray-400 light:text-gray-600">Find a raid with Friendship and MURDER!</p>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            
            <section class="md:col-span-2 lg:col-span-3 p-6 rounded-2xl shadow-lg bg-gray-800 light:bg-white">
                <h2 class="text-2xl font-bold mb-1 text-center text-gray-200 light:text-gray-800">The Full Weekly Schedule</h2>
                <p class="text-center text-gray-400 mb-8 light:text-gray-600">PACK üê∫ ‚Ä¢  SOCK üß¶ ‚Ä¢  KILL ‚ò†Ô∏è ‚Ä¢ DAWN üåû <br> üèÜ Chill PPT/Fighting ‚Ä¢ ‚öîÔ∏è Fighting</p>           
                <div class="grid grid-cols-1 xl:grid-cols-7 gap-x-6 gap-y-8">
                    <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Sunday</h3>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üß¶</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600">8:00 AM EST (05h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Bloop</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#F24405]">‚ò†Ô∏è</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ KILL raid</p><p class="text-sm text-gray-400 light:text-gray-600">5:30 PM EST (14h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Luci</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üåû</div><p class="font-semibold text-gray-200 light:text-gray-800">‚öîÔ∏è DAWN raid</p><p class="text-sm text-gray-400 light:text-gray-600">6:30 AM EST (15h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Morthuus</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üß¶</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600">8:00 PM EST (17h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Mocha Joe</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#75B54A]">üê∫</div><p class="font-semibold text-gray-200 light:text-gray-800">‚öîÔ∏è PACK raid</p><p class="text-sm text-gray-400 light:text-gray-600">8:00 PM EST (17h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Eledia</p></div>
                    </div>
                    <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Monday</h3>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#F24405]">‚ò†Ô∏è</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ KILL raid</p><p class="text-sm text-gray-400 light:text-gray-600">5:30 PM EST (14h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Luci</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üåû</div><p class="font-semibold text-gray-200 light:text-gray-800">‚öîÔ∏è DAWN raid</p><p class="text-sm text-gray-400 light:text-gray-600">6:30 AM EST (15h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Morthuus</p></div>                        
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#75B54A]">üê∫</div><p class="font-semibold text-gray-200 light:text-gray-800">‚öîÔ∏è PACK raid</p><p class="text-sm text-gray-400 light:text-gray-600">8:00 PM EST (17h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Pycachu</p></div>
                    </div>
                     <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Tuesday</h3>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üß¶</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600">8:00 AM EST (05h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Bloop</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#F24405]">‚ò†Ô∏è</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ KILL raid</p><p class="text-sm text-gray-400 light:text-gray-600">5:30 PM EST (14h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Luci</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üåû</div><p class="font-semibold text-gray-200 light:text-gray-800">‚öîÔ∏è DAWN raid</p><p class="text-sm text-gray-400 light:text-gray-600">6:30 AM EST (15h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Morthuus</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üß¶</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600">8:00 PM EST (17h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Vin</p></div>
                    </div>
                    <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Wednesday</h3>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#F24405]">‚ò†Ô∏è</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ KILL raid</p><p class="text-sm text-gray-400 light:text-gray-600">5:30 PM EST (14h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Luci</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üåû</div><p class="font-semibold text-gray-200 light:text-gray-800">‚öîÔ∏è DAWN raid</p><p class="text-sm text-gray-400 light:text-gray-600">6:30 AM EST (15h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Morthuus</p></div>                        
                         <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#75B54A]">üê∫</div><p class="font-semibold text-gray-200 light:text-gray-800">‚öîÔ∏è PACK raid</p><p class="text-sm text-gray-400 light:text-gray-600">8:00 PM EST (17h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Evo</p></div>
                    </div>
                    <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Thursday</h3>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#F24405]">‚ò†Ô∏è</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ KILL raid</p><p class="text-sm text-gray-400 light:text-gray-600">5:30 PM EST (14h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Luci</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üß¶</div><p class="font-semibold text-gray-200 light:text-gray-800">‚öîÔ∏è SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600">8:00 PM EST (17h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Batercus</p></div>
                    </div>
                    <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Friday</h3>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üß¶</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600">8:00 AM EST (05h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Nyoom</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#F24405]">‚ò†Ô∏è</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ KILL raid</p><p class="text-sm text-gray-400 light:text-gray-600">5:30 PM EST (14h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Luci</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#F29F05]">üêπ</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ FAM raid</p><p class="text-sm text-gray-400 light:text-gray-600">10:00 PM EST (19h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: (Rotation)</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#F24405]">‚ò†Ô∏è</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ KILL raid</p><p class="text-sm text-gray-400 light:text-gray-600">10:00 PM EST (19h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Tiny</p></div>
                    </div>
                     <div class="xl:col-span-1">
                        <h3 class="font-bold text-xl mb-4 text-[#F24405]">Saturday</h3>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üß¶</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ SOCK raid</p><p class="text-sm text-gray-400 light:text-gray-600">8:00 AM EST (05h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Reina</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#F24405]">‚ò†Ô∏è</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ KILL raid</p><p class="text-sm text-gray-400 light:text-gray-600">5:30 PM EST (14h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Tora/Reaper</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">üåû</div><p class="font-semibold text-gray-200 light:text-gray-800">‚öîÔ∏è DAWN raid</p><p class="text-sm text-gray-400 light:text-gray-600">6:30 AM EST (15h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Morthuus</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#F29F05]">üêπ</div><p class="font-semibold text-gray-200 light:text-gray-800">‚öîÔ∏è FAM raid</p><p class="text-sm text-gray-400 light:text-gray-600">8:00 PM EST (17h00 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: (Rotation)</p></div>
                        <div class="relative pl-8 timeline-item"><div class="timeline-icon bg-[#00A6A6]">‚ò†Ô∏è</div><p class="font-semibold text-gray-200 light:text-gray-800">üèÜ KILL raid</p><p class="text-sm text-gray-400 light:text-gray-600">9:30 PM EST (18h30 PST)</p><p class="text-xs text-gray-500 light:text-gray-500">Lead: Tiny</p></div>
                    </div>
                </div>
            </section>
            <div class="md:col-span-1 lg:col-span-1 p-6 rounded-2xl shadow-lg flex flex-col justify-center items-center text-center kpi-card">
                <h3 class="text-xl font-bold uppercase tracking-wider text-white/80">Total Raids</h3>
                <p class="kpi-number">26</p>
                <p class="font-medium">events scheduled this week</p>
            </div>
            <div class="md:col-span-1 lg:col-span-1 p-6 rounded-2xl shadow-lg flex flex-col justify-center items-center text-center bg-gray-800 light:bg-white">
                <h3 class="text-xl font-bold uppercase tracking-wider text-gray-400 light:text-gray-500">Active Raid Leaders</h3>
                <p class="kpi-number text-[#F27405]">13</p>
                <p class="font-medium text-gray-300 light:text-gray-600">members leading the charge</p>
            </div>
            <div class="md:col-span-2 lg:col-span-1 p-6 rounded-2xl shadow-lg flex flex-col justify-center items-center text-center bg-gray-800 light:bg-white">
                <h3 class="text-xl font-bold uppercase tracking-wider text-gray-400 light:text-gray-500">Minutes without incident</h3>
                <p class="kpi-number text-[#75B54A]">0</p>
                <p class="font-medium text-gray-300 light:text-gray-600">Minutes since last inappropriate voice chat</p>
            </div>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggle = document.getElementById('darkModeToggle');
            const body = document.body;

            // Apply 'light' and 'dark' classes for dynamic Tailwind styling
            const applyModeClasses = (isLightMode) => {
                const elementsToToggleBg = document.querySelectorAll('.bg-gray-800');
                const elementsToToggleTextGray200 = document.querySelectorAll('.text-gray-200');
                const elementsToToggleTextGray300 = document.querySelectorAll('.text-gray-300');
                const elementsToToggleTextGray400 = document.querySelectorAll('.text-gray-400');
                const elementsWithLightBg = document.querySelectorAll('.light\\:bg-white');
                const elementsWithLightTextGray500 = document.querySelectorAll('.light\\:text-gray-500');
                const elementsWithLightTextGray600 = document.querySelectorAll('.light\\:text-gray-600');
                const elementsWithLightTextGray800 = document.querySelectorAll('.light\\:text-gray-800');


                if (isLightMode) {
                    body.classList.add('light-mode');
                    elementsWithLightBg.forEach(el => el.classList.add('bg-white'));
                    elementsWithLightTextGray500.forEach(el => el.classList.add('text-gray-500'));
                    elementsWithLightTextGray600.forEach(el => el.classList.add('text-gray-600'));
                    elementsWithLightTextGray800.forEach(el => el.classList.add('text-gray-800'));


                } else {
                    body.classList.remove('light-mode');
                    elementsWithLightBg.forEach(el => el.classList.remove('bg-white'));
                    elementsWithLightTextGray500.forEach(el => el.classList.remove('text-gray-500'));
                    elementsWithLightTextGray600.forEach(el => el.classList.remove('text-gray-600'));
                    elementsWithLightTextGray800.forEach(el => el.classList.remove('text-gray-800'));
                }
            };

            // Check for saved preference in localStorage
            const savedMode = localStorage.getItem('darkMode');

            if (savedMode === 'light') {
                toggle.checked = true; // Check the toggle if light mode was saved
                applyModeClasses(true); // Apply light mode classes
            } else {
                toggle.checked = false; // Ensure toggle is unchecked for dark mode
                applyModeClasses(false); // Apply dark mode classes (default)
            }

            toggle.addEventListener('change', () => {
                if (toggle.checked) {
                    applyModeClasses(true);
                    localStorage.setItem('darkMode', 'light');
                } else {
                    applyModeClasses(false);
                    localStorage.setItem('darkMode', 'dark');
                }
            });
        });
    </script>
</body>
</html>
